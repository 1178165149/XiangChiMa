<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="../css/xcm-index.css"/>
    <link rel="icon" href="../img/xcm-icon.png"/>
    <script src="../js/jquery-3.3.1.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/paginator.min.js" type="text/javascript" charset="utf-8"></script>
    <title>想吃吗</title>

</head>
<body>

<!-- nav导航条 -->
<div id="head"></div>



<!-- 搜索框 -->
<div class="container">
    <div class="row">
        <div class="col-md-8 col-md-offset-2">

            <form action="" method="" class="le-search-form">



                <div class="form-group form-group-lg">
                    <div class="input-group">
                        <input type="text" name="keyword" id="keyword" class="form-control"
                               placeholder="想吃吗搜索"/>
                        <div class="input-group-btn">
                            <button type="button" class="btn btn-danger btn-lg le-btn" id="le-search-btn">
                                <span class="glyphicon glyphicon-search" style="vertical-align: -3px;"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </form>

        </div>
    </div>
</div>



<!-- banner广告 -->
<div class="container le-banner" id="le-banner">
    <div class="row">
        <div class="col-md-3 hidden-xs hidden-sm">
            <ul class="list-unstyled le-nav-aside">
                <li>
                    <a href="">美食</a>
                    <a href="" class="sm_link">汉堡薯条</a>
                    <a href="" class="sm_link">披萨</a>
                </li>
                <li><a href="">超市便利</a>
                    <a href="" class="sm_link">时令鲜果</a>
                    <a href="" class="sm_link">牛奶酸奶</a></li>
                <li><a href="">甜点饮品</a>
                    <a href="" class="sm_link">生日蛋糕</a>
                    <a href="" class="sm_link">奶茶</a></li>
                <li><a href="">蔬菜水果</a>
                    <a href="" class="sm_link">果捞</a>
                    <a href="" class="sm_link">蔬菜肉禽</a></li>
                <li><a href="">早餐</a>
                    <a href="" class="sm_link">地方小吃</a>
                    <a href="" class="sm_link">豆浆</a></li>
                <li><a href="">正餐优选</a>
                    <a href="" class="sm_link">快餐</a>
                    <a href="" class="sm_link">日韩料理</a></li>
                <li><a href="">夜宵</a>
                    <a href="" class="sm_link">香锅烤鱼</a>
                    <a href="" class="sm_link">火锅</a></li>
                <li><a href="">甜蜜蛋糕</a>
                    <a href="" class="sm_link">美味蛋糕</a>
                    <a href="" class="sm_link">甜点</a></li>
                <li><a href="">家常菜</a>
                    <a href="" class="sm_link">口味川湘</a>
                    <a href="" class="sm_link">北方佳肴</a></li>
                <li><a href="">快食简餐</a>
                    <a href="" class="sm_link">盖饭</a>
                    <a href="" class="sm_link">便当寿司</a></li>
                <li><a href="">日韩料理</a>
                    <a href="" class="sm_link">炸鸡</a>
                    <a href="" class="sm_link">韩国料理</a></li>
                <li><a href="">小吃馆</a>
                    <a href="" class="sm_link">快餐小吃</a>
                    <a href="" class="sm_link">韩国料理</a></li>
            </ul>
        </div>
        <div class="col-md-9">
            <div id="carousel-example-generic" class="carousel slide">
                <ol class="carousel-indicators">
                    <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                    <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                    <li data-target="#carousel-example-generic" data-slide-to="2"></li>
                </ol>

                <!-- 轮播图 -->
                <div class="carousel-inner">
                    <div class="item active">
                        <img style="height: 415px;"
                             src="https://i3.meishichina.com/attachment/magic/2023/06/16/2023061616869264727371.jpg?thumb=1&w=1533&h=575&f=webp&q=90">
                        >
                    </div>
                    <div class="item">
                        <img style="height: 415px;"
                             src="https://i3.meishichina.com/attachment/magic/2023/06/17/2023061716869834191151.jpg?thumb=1&w=1533&h=575&f=webp&q=90">
                    </div>
                    <div class="item">
                        <img style="height: 415px;"
                             src="https://i3.meishichina.com/attachment/magic/2023/06/18/2023061816870660479181.jpg?thumb=1&w=1533&h=575&f=webp&q=90">
                    </div>

                </div>

                <a class="left carousel-control" href="#carousel-example-generic" data-slide="prev">
                    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                </a>
                <a class="right carousel-control" href="#carousel-example-generic" data-slide="next">
                    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                </a>
            </div>
        </div>
    </div>
</div>

<!--搜索结果标题-->
<div class="container-fluid hidden" id="le-search-title" style="margin-top: -20px">
    <h3 class="le-header">搜索结果</h3>
</div>

<!--搜索结果内容-->
<div class="container">
    <div class="row" id="le-search-result">
        <!--菜品展示示例-->
<!--        <div class="col-sm-6 col-md-4 col-lg-3">-->
<!--            <div class="thumbnail center-block">-->
<!--                <img src="http://img14.360buyimg.com/n7/jfs/t1/215602/32/17523/540419/626011b9E7cf745da/049e458ca4d4141f.jpg">-->
<!--                <div class="caption">-->
<!--                    <h5 class="le-price le-text">￥350</h5>-->
<!--                    <p class="le-title">菜品标题</p>-->
<!--                    <p class="le-shop">菜品店铺</p>-->
<!--                    <a href="" target="_blank" class="btn btn-danger btn-xs le-btn le-buy">热卖菜品 火速抢购</a>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
    </div>
</div>

<!--分页-->
<div class="container text-center">
    <ul class="pagination hidden" id="pagination">
    </ul>
</div>

<!-- header -->
<div class="container-fluid">
    <h3 class="le-header">热卖菜品</h3>
</div>

<!-- 热门菜品 -->
<div class="container">
    <div class="row">
        <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="thumbnail center-block">
                <img src="../img/10001.jpg">
                <div class="caption">
                    <h5 class="le-price le-text">￥123.00</h5>
                    <p class="le-title">特色小吃鱼香肉丝</p>
                    <p class="le-shop">想吃吗私房菜</p>
                    <button type="button" class="btn btn-danger btn-xs le-btn le-buy">热卖菜品 火速抢购</button>
                </div>
            </div>
        </div>

        <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="thumbnail center-block">
                <img src="../img/10002.jpg">
                <div class="caption">
                    <h5 class="le-price le-text">￥121.00</h5>
                    <p class="le-title">特色小吃宫保鸡丁</p>
                    <p class="le-shop">想吃吗私房菜</p>
                    <button type="button" class="btn btn-danger btn-xs le-btn le-buy">热卖菜品 火速抢购</button>
                </div>
            </div>
        </div>

        <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="thumbnail center-block">
                <img src="../img/10003.jpg">
                <div class="caption">
                    <h5 class="le-price le-text">￥156.00</h5>
                    <p class="le-title">特色小吃糖醋里脊</p>
                    <p class="le-shop">想吃吗私房菜</p>
                    <button type="button" class="btn btn-danger btn-xs le-btn le-buy">热卖菜品 火速抢购</button>
                </div>
            </div>
        </div>

        <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="thumbnail center-block">
                <img src="../img/10005.jpg">
                <div class="caption">
                    <h5 class="le-price le-text">￥47.00</h5>
                    <p class="le-title">特色小吃回锅肉</p>
                    <p class="le-shop">想吃吗私房菜</p>
                    <button type="button" class="btn btn-danger btn-xs le-btn le-buy">热卖菜品 火速抢购</button>
                </div>
            </div>
        </div>


        <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="thumbnail center-block">
                <img src="../img/10010.jpg">
                <div class="caption">
                    <h5 class="le-price le-text">￥28.00</h5>
                    <p class="le-title">特色小吃麻辣火锅</p>
                    <p class="le-shop">想吃吗私房菜</p>
                    <button type="button" class="btn btn-danger btn-xs le-btn le-buy">热卖菜品 火速抢购</button>
                </div>
            </div>
        </div>

        <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="thumbnail center-block">
                <img src="../img/10032.jpg">
                <div class="caption">
                    <h5 class="le-price le-text">￥951.00</h5>
                    <p class="le-title">悠久历史文化酸汤鱼</p>
                    <p class="le-shop">想吃吗私房菜</p>
                    <button type="button" class="btn btn-danger btn-xs le-btn le-buy">热卖菜品 火速抢购</button>
                </div>
            </div>
        </div>

        <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="thumbnail center-block">
                <img src="../img/10033.jpg">
                <div class="caption">
                    <h5 class="le-price le-text">￥159.00</h5>
                    <p class="le-title">悠久历史文化鸡蛋炒饭</p>
                    <p class="le-shop">想吃吗私房菜</p>
                    <button type="button" class="btn btn-danger btn-xs le-btn le-buy">热卖菜品 火速抢购</button>
                </div>
            </div>
        </div>

        <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="thumbnail center-block">
                <img src="../img/10038.jpg">
                <div class="caption">
                    <h5 class="le-price le-text">￥147.00</h5>
                    <p class="le-title">悠久历史文化豆腐肉丝</p>
                    <p class="le-shop">想吃吗私房菜</p>
                    <button type="button" class="btn btn-danger btn-xs le-btn le-buy">热卖菜品 火速抢购</button>
                </div>
            </div>
        </div>

        <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="thumbnail center-block">
                <img src="../img/10045.jpg">
                <div class="caption">
                    <h5 class="le-price le-text">￥131.00</h5>
                    <p class="le-title">丰富多样的独特魅力小炒羊肉</p>
                    <p class="le-shop">想吃吗私房菜</p>
                    <button type="button" class="btn btn-danger btn-xs le-btn le-buy">热卖菜品 火速抢购</button>
                </div>
            </div>
        </div>

        <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="thumbnail center-block">
                <img src="../img/10046.jpg">
                <div class="caption">
                    <h5 class="le-price le-text">￥151.00</h5>
                    <p class="le-title">丰富多样的独特魅力葱爆鸡丝</p>
                    <p class="le-shop">想吃吗私房菜</p>
                    <button type="button" class="btn btn-danger btn-xs le-btn le-buy">热卖菜品 火速抢购</button>
                </div>
            </div>
        </div>

        <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="thumbnail center-block">
                <img src="../img/10051.jpg">
                <div class="caption">
                    <h5 class="le-price le-text">￥33.00</h5>
                    <p class="le-title">特色更是居于世界之巅酱爆鸡丁</p>
                    <p class="le-shop">想吃吗私房菜</p>
                    <button type="button" class="btn btn-danger btn-xs le-btn le-buy">热卖菜品 火速抢购</button>
                </div>
            </div>
        </div>

        <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="thumbnail center-block">
                <img src="../img/10058.jpg">
                <div class="caption">
                    <h5 class="le-price le-text">￥55.00</h5>
                    <p class="le-title">特色更是居于世界之巅扬州炒饭</p>
                    <p class="le-shop">想吃吗私房菜</p>
                    <button type="button" class="btn btn-danger btn-xs le-btn le-buy">热卖菜品 火速抢购</button>
                </div>
            </div>
        </div>

    </div>
</div>

<div class="container-fluid">
    <h3 class="le-header"></h3>
</div>

<!-- footter -->
<div id="foot"></div>

</body>
<script type="application/javascript">

    //加载导航条、页脚
    $(document).ready(function(){
        $("#head").load("head.html");
        $("#foot").load("foot.html");
    });

    //分页js
    function callPaginator(currentPage, pages, callback) {
        $('#pagination').bootstrapPaginator({
            bootstrapMajorVersion: 3,
            size: "normal",
            alignment: "center",
            currentPage: currentPage,
            totalPages: pages,
            numberOfPages: 5,
            // 点击页码回调函数
            onPageClicked: function (event, originalE, type, page) {
                callback(page, 12, $('#keyword').val());
                $(window).scrollTop(0);
            },
            itemTexts: function (type, page, current) {
                switch (type) {
                    case 'first':
                        return "首页";
                    case 'prev':
                        return "上一页";
                    case 'next':
                        return "下一页";
                    case 'last':
                        return "末页";
                    case 'page':
                        return page;
                }
            }
        });
    }


    //搜索框点击事件
    $('#le-search-btn').click(function (){
        //搜索菜品
        getMealList(1, 12, $('#keyword').val())
    });

    //搜索菜品
    function getMealList(page, size, keyword){
        $.ajax({
            type: 'GET',
            url: '/xcm/meal',
            data: {
                page: page,
                size: size,
                keyword: keyword
            },
            success: function (json){
                $('#le-banner').addClass('hidden');
                $('#le-search-title').removeClass('hidden');

                //搜索内容清空
                $('#le-search-result').empty();

                //循环获取菜品列表里的菜品
                for(let i = 0; i < json.data.mealList.length; i++) {
                    //菜品信息
                    let meal = json.data.mealList[i];

                    let url = '';
                    url = 'xcm-details.html?mid=' + meal.mid;

                    let template =
                        `
                    <div class="col-sm-6 col-md-4 col-lg-3">
                           <div class="thumbnail center-block">
                           <img src="${meal.url}">
                        <div class="caption">
                        <h5 class="le-price le-text">￥${meal.price}</h5>
                        <p class="le-title">${meal.title}</p>
                        <p class="le-shop">${meal.shop}</p>
                        <a href="${url}" target="_blank" class="btn btn-danger btn-xs le-btn le-buy">热卖菜品 火速抢购</a>
                    </div>
            </div>
        </div>
                    `;

                    $('#le-search-result').append(template);

                }

                //显示分页按钮
                $('#pagination').removeClass('hidden');

                // 调用分页按钮
                callPaginator(page, json.data.pages, getMealList);
            }
        });
    }


</script>
</html>
